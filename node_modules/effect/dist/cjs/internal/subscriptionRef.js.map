{"version":3,"file":"subscriptionRef.js","names":["Effect","_interopRequireWildcard","require","Effectable","_Function","PubSub","Readable","Ref","Subscribable","Synchronized","_circular","_ref","stream","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","SubscriptionRefSymbolKey","SubscriptionRefTypeId","exports","Symbol","for","subscriptionRefVariance","_A","_","SubscriptionRefImpl","Class","ref","pubsub","semaphore","TypeId","RefTypeId","refVariance","SynchronizedRefTypeId","synchronizedVariance","constructor","commit","changes","pipe","flatMap","map","fromPubSub","scoped","s","concat","make","withPermits","unwrapScoped","modify","f","modifyEffect","succeed","b","as","zipLeft","publish","self","value","all","unbounded","makeSemaphore","dual"],"sources":["../../../src/internal/subscriptionRef.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}