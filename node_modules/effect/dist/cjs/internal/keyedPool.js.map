{"version":3,"file":"keyedPool.js","names":["Duration","_interopRequireWildcard","require","Equal","_Function","Hash","HashMap","MutableRef","Option","_Pipeable","Predicate","core","fiberRuntime","pool","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","KeyedPoolSymbolKey","KeyedPoolTypeId","exports","Symbol","for","KeyedPoolMapValueSymbol","keyedPoolVariance","_K","_","_E","_A","KeyedPoolImpl","getOrCreatePool","activePools","constructor","key","flatMap","invalidate","item","forEachSequentialDiscard","pipe","pipeArguments","arguments","Complete","_tag","symbol","string","combine","hash","cached","isComplete","equals","isTagged","Pending","deferred","isPending","makeImpl","min","max","timeToLive","all","context","fiberId","sync","make","empty","scopeMake","map","scope","suspend","value","getOrUndefined","undefined","uninterruptibleMask","restore","deferredUnsafeMake","previous","update","scopeExtend","makeWithTTL","acquire","provideContext","getOrElse","infinity","matchCauseEffect","onFailure","cause","current","remove","zipRight","deferredFailCause","failCause","onSuccess","as","deferredSucceed","succeed","deferredAwait","forEachSequential","Array","from","values","options","size","none","makeWith","decode","some","makeWithTTLBy","dual","self"],"sources":["../../../src/internal/keyedPool.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}